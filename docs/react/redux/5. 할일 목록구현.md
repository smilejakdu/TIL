# todo

### 모듈 만들기

src/modules/todos.js

```javascript
// 액션 타입 정의

const CHANGE_INPUT = "todos/CHANGE_INPUT";
const INSERT = "todos/INSERT";
const TOGGLE = "todos/TOGGLE";
const REMOVE = "todos/REMOVE";

// 액션 함수 정의

let id = 3;
export const insert = (text) => ({
  type: INSERT,
  todo: {
    id: id++,
    textt,
    done: false,
  },
});

export const toggle = (id) => ({
  type: TOGGLE,
  id,
});

export const remove = (id) => ({
  type: REMOVE,
  id,
});

const initialState = {
  input: "",
  todos: [
    {
      id: 1,
      text: "redux basic lesson",
      done: true,
    },
    {
      id: 2,
      text: "react use with redux",
      done: false,
    },
  ],
};

function todos(state = initialState, action) {
  switch (action.type) {
    case CHANGE_INPUT:
      return {
        ...state,
        input: action.input,
      };
    case INSERT:
      return {
        ...state,
        todos: state.todos.concat(action.todo),
      };
    case TOGGLE:
      return {
        ...state,
        todos: state.todos.map((todo) =>
          todo.id === action.id ? { ...todo, done: !todo.done } : todo
        ),
      };
    case REMOVE:
      return {
        ...state,
        todos: state.todos.filter((todo) => todo.id !== action.id),
      };
    default:
      return state;
  }
}

export default todos;
```

### 루트 리듀서 만들기

src/modules/index.js

```javascript
import { combineReducers } from "redux";
import counter from "./counter";
import todos from "./todos";

const rootReducer = combineReducer({
  counter,
  todos,
});

export default rootReducer;
```

나중에 불러올 때 index.js 만불러오면 된다.

```javascript
import rootReducer from "./modules";
```

### 스토어 만들기

리덕스를 리액트에 적용

```javascript
import React from "react";
import ReactDOM from "react-dom";
import "./index.css";
import App from "./App";
import * as serviceWorker from "./serviceWorker";

import { Provider } from "react-redux";
import { createStore } from "redux";
import rootReducer from "./modules";

const store = createStore(rootReducer);
ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById("root")
);

serviceWorker.unregister();
```

App 컴포넌트를 react-redux 에서 제공하는 Provider 컴포넌트로 감싸줘야합니다.
그리고 store 를 props 로 전달

### TodosContainer

```javascript
import React from "react";
import { connect } from "react-redux";
import { changeInput, insert, toggle, remove } from "../modules/todos";
import Todos from "../components/Todos";

const TodosContainer = ({
  input,
  todos,
  changeInput,
  insert,
  toggle,
  remove,
}) => {
  return (
    <Todos
      input={input}
      todos={todos}
      onChangeInput={changeInput}
      onInsert={insert}
      onToggle={toggle}
      onRemove={remove}
    />
  );
};

export default connect(
    // 비구조화 할당을 통해 todos 를 분리
    // state.todos.input 대신 todos.input 을 사용

    ({todos}=>({
        input : todos.input,
        todos: todos.toddos,
    }),
    {
        changeInput,
        insert,
        toggle,
        remove,
    },
)(TodosContainer);

```

/src/components/Todos.js

```javascript

import React from 'react';

const TodoItem ({todo , onToggle , onRemove}){
    return (
        <div>
            <input
                type="checkbox"
                onClick={()=>onToggle(todo.id)}
                checked = {todo.done}
                readOnly = {true}
            >
        </div>

        <span style={{textDecoration : todo.done ? 'line-through' : 'none'}}>
        {todo.text}
        <span>
        <button onClick={()=>onRemove(todo.i)}>삭제</button>
    );
};
```
